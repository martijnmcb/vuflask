<!doctype html>
<html lang="nl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SmartWheels</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <a class="navbar-brand" href="/">SmartWheels (c) Pedro</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMain" aria-controls="navbarsMain" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarsMain">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="/beheer/">Beheer</a></li>
          </ul>
         <div class="d-flex align-items-center gap-2">
  <div class="btn-group btn-group-sm" role="group" aria-label="Tekstgrootte">
    <button id="fontDec" type="button" class="btn btn-outline-light" aria-label="Verklein tekst (A min)">A-</button>
    <button id="fontReset" type="button" class="btn btn-outline-light" aria-label="Herstel tekstgrootte (standaard)">A</button>
    <button id="fontInc" type="button" class="btn btn-outline-light" aria-label="Vergroot tekst (A plus)">A+</button>
  </div>
  <button id="themeToggle" type="button" class="btn btn-outline-light btn-sm" aria-pressed="false" aria-label="Schakel donker thema">
    <i class="bi bi-moon-stars"></i>
  </button>
  <a class="btn btn-outline-light btn-sm" href="/auth/logout"><i class="bi bi-box-arrow-right"></i> Uitloggen</a>
</div>
        </div>
      </div>
    </nav>

    <div class="container my-4">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% for cat, msg in messages %}
          <div class="alert alert-{{ 'danger' if cat=='danger' else ('warning' if cat=='warning' else ('success' if cat=='success' else 'info')) }} alert-dismissible fade show" role="alert">
            {{ msg }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endwith %}

      {% block content %}{% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  (function() {
    const STORAGE_KEY = 'ui.fontSizePx';
    const MIN = 14, MAX = 22, STEP = 1, DEF = 16;
    const root = document.documentElement;
    function apply(px){ root.style.setProperty('--base-font-size', px + 'px'); }
    function load(){
      const v = parseInt(localStorage.getItem(STORAGE_KEY), 10);
      return Number.isFinite(v) ? Math.min(MAX, Math.max(MIN, v)) : DEF;
    }
    function save(px){ localStorage.setItem(STORAGE_KEY, String(px)); }
    let current = load();
    apply(current);

    const dec = document.getElementById('fontDec');
    const inc = document.getElementById('fontInc');
    const reset = document.getElementById('fontReset');
    function onDec(){ current = Math.max(MIN, current - STEP); apply(current); save(current); }
    function onInc(){ current = Math.min(MAX, current + STEP); apply(current); save(current); }
    function onReset(){ current = DEF; apply(current); save(current); }
    if(dec) dec.addEventListener('click', onDec);
    if(inc) inc.addEventListener('click', onInc);
    if(reset) reset.addEventListener('click', onReset);

    // Sneltoetsen: Ctrl/Cmd +/−/0 om te vergroten/verkleinen/resetten
    window.addEventListener('keydown', (e) => {
      const plus = (e.key === '+' || e.key === '=');
      const minus = (e.key === '-');
      const zero = (e.key === '0');
      if ((e.ctrlKey || e.metaKey) && (plus || minus || zero)) {
        e.preventDefault();
        if (plus) onInc(); else if (minus) onDec(); else if (zero) onReset();
      }
    });
  })();
</script>

<script>
  // Thema schakelaar (licht ↔ donker) met opslag in localStorage
  (function() {
    const STORAGE_KEY = 'ui.theme'; // 'light' | 'dark' | null
    const root = document.documentElement;
    const btn = document.getElementById('themeToggle');

    function setIcon(mode){
      if (!btn) return;
      btn.innerHTML = mode === 'dark'
        ? '<i class="bi bi-sun"></i>'
        : '<i class="bi bi-moon-stars"></i>';
      btn.setAttribute('aria-pressed', mode === 'dark' ? 'true' : 'false');
      btn.title = mode === 'dark' ? 'Schakel licht thema' : 'Schakel donker thema';
    }

    function apply(mode){
      const isDark = mode === 'dark';
      root.classList.toggle('theme-dark', isDark);
      root.classList.toggle('theme-light', !isDark);
      root.setAttribute('data-theme', isDark ? 'dark' : 'light');
      setIcon(mode);
    }

    function load(){ return localStorage.getItem(STORAGE_KEY); }
    function save(mode){ localStorage.setItem(STORAGE_KEY, mode); }

    // Init vanuit opslag; val terug op systeemvoorkeur
    let current = load();
    if (current !== 'dark' && current !== 'light') {
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      current = prefersDark ? 'dark' : 'light';
    }
    apply(current);

    if (btn) {
      btn.addEventListener('click', function(){
        current = (current === 'dark') ? 'light' : 'dark';
        apply(current);
        save(current);
      });
    }
  })();
</script>

  </body>
</html>
